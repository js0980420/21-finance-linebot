import{c as d,o as u,a as s,S as le,r as c,i as ue,y as X,T as Z,b as ne,x as _,E as G,d as a,e as M,k as P,t as o,g as p,v as C,I as H,F as z,q as J,A as D,U as ie,s as K,j as Ae,L as Se}from"#entry";import{_ as Fe,r as Pe}from"./CRGlAI26.js";import{u as je,f as Re}from"./CdwAlNvG.js";import{u as Te}from"./DgLT0ASK.js";import{u as qe}from"./BtlpaPqX.js";import{u as Ee}from"./CCH93LFy.js";import{r as Ie}from"./BC8p3SKJ.js";import{r as Le}from"./D4TV4JXr.js";import{r as ze}from"./c8JhvyFk.js";import{r as De}from"./UqRq4KLf.js";import{r as Be}from"./B5My0XuL.js";import"./CKtbBPOe.js";function Ne(k,n){return u(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})])}function Oe(k,n){return u(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})])}const We=()=>{const k=le("locale",()=>"zh-TW"),n={"zh-TW":()=>Z(()=>import("./8ju_HUnj.js"),[],import.meta.url).then(i=>i.default),en:()=>Z(()=>import("./9MBXSPND.js"),[],import.meta.url).then(i=>i.default),ja:()=>Z(()=>import("./DQewKmdP.js"),[],import.meta.url).then(i=>i.default)},m=le("messages",()=>({})),A=async i=>{if(!m.value[i])try{const x=await n[i]();m.value[i]=x}catch(x){console.warn(`Failed to load translations for ${i}:`,x),m.value[i]={}}},y=(i,x)=>x.split(".").reduce(($,V)=>$?.[V],i),B=(i,x=i)=>{const $=m.value[k.value];if(!$)return x;const V=y($,i);return V!==void 0?V:x},N=c([{code:"zh-TW",name:"繁體中文",flag:"🇹🇼"},{code:"en",name:"English",flag:"🇺🇸"},{code:"ja",name:"日本語",flag:"🇯🇵"}]);ue(async()=>{await A(k.value)}),X(k,async i=>{await A(i),localStorage.setItem("admin-template-locale",i)});{const i=localStorage.getItem("admin-template-locale");i&&n[i]&&(k.value=i)}return{locale:k,locales:N,t:B}},Qe={class:"space-y-6"},Ze={key:0,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center"},Ge={class:"flex items-center"},He=["src","alt"],Je={class:"ml-4"},Ke={class:"text-sm font-medium text-gray-900"},Xe={class:"text-sm text-gray-500"},Ye={class:"flex items-center space-x-2 justify-end"},et=["onClick","title"],tt={class:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap"},st=["onClick"],at=["onClick"],rt=["onClick"],ot={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"},lt={class:"bg-white rounded-lg shadow-xl max-w-md w-full p-6"},nt={class:"text-lg font-medium text-gray-900 mb-4"},it={class:"space-y-4"},ut={class:"block text-sm font-medium text-gray-700 mb-2"},dt={class:"block text-sm font-medium text-gray-700 mb-2"},ct={class:"block text-sm font-medium text-gray-700 mb-2"},mt={class:"block text-sm font-medium text-gray-700 mb-2"},gt={class:"block text-sm font-medium text-gray-700 mb-2"},pt={class:"block text-sm font-medium text-gray-700 mb-2"},yt=["value"],vt={class:"block text-sm font-medium text-gray-700 mb-2"},ft={class:"flex justify-end space-x-3 mt-6"},xt={key:1,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"},ht={class:"bg-white rounded-lg shadow-xl max-w-md w-full p-6"},bt={class:"text-lg font-medium text-gray-900 mb-4"},wt={class:"space-y-4"},_t={class:"block text-sm font-medium text-gray-700 mb-2"},kt={class:"block text-sm font-medium text-gray-700 mb-2"},Ct={key:0},Ut={class:"block text-sm font-medium text-gray-700 mb-2"},$t=["value"],Vt={class:"flex justify-end space-x-3 mt-6"},Mt={key:2,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"},At={class:"bg-white rounded-lg shadow-xl max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto"},St={class:"text-lg font-medium text-gray-900 mb-4"},Ft={class:"mb-4"},Pt={class:"relative"},jt={class:"mb-4 flex space-x-4"},Rt={class:"flex items-center"},Tt={class:"flex items-center"},qt={key:0,class:"text-center py-8"},Et={key:1,class:"space-y-2 max-h-96 overflow-y-auto"},It={class:"flex items-center space-x-3"},Lt=["value"],zt={class:"font-medium text-gray-900"},Dt={class:"text-sm text-gray-500"},Bt={class:"text-sm text-gray-500"},Nt={key:0},Ot={key:1,class:"text-yellow-600"},Wt={key:0,class:"text-center py-8"},Qt={key:2,class:"mt-4 p-3 bg-blue-50 rounded-lg"},Zt={class:"text-sm text-blue-800"},Gt={class:"flex justify-end space-x-3 mt-6"},Ht=["disabled"],us={__name:"users",setup(k){const{t:n}=We(),m=Te(),{success:A,error:y}=qe(),{getUsers:B,createUser:N,updateUser:i,deleteUser:x,getRoles:$,assignRole:V}=Ee(),{getCustomers:de,assignCustomer:ce}=je(),j=c(""),R=c(!1),T=c(!1),g=c({}),l=c({name:"",username:"",email:"",password:"",password_confirmation:"",role:"",status:"active"}),O=c(!1),Y=c(!1),q=c([]),E=c([]),I=c(!1),U=c(null),h=c(""),b=c("unassigned"),W=c(!1),L=c(!1),S=c([]),v=c([]),Q=c(1),ee=c(1),F=c(10),te=c(0),me=[{key:"user",title:n("auth.user"),sortable:!1,width:"300px"},{key:"role",title:n("auth.role"),sortable:!0,width:"150px"},{key:"status",title:n("auth.status"),sortable:!0,width:"120px"},{key:"last_login_at",title:n("auth.last_login"),sortable:!0,width:"180px",formatter:Re.datetime},{key:"actions",title:n("auth.actions"),sortable:!1,width:"300px"}],ge=r=>{j.value=r,f(1)},pe=r=>{f(r)},ye=r=>{F.value=r,f(1)},f=async(r=1)=>{try{O.value=!0;const e=await B({search:j.value,page:r,per_page:F.value});e.data&&Array.isArray(e.data)?(q.value=e.data,Q.value=e.current_page||r,ee.value=e.last_page||Math.ceil((e.total||e.data.length)/F.value),te.value=e.total||e.data.length):Array.isArray(e)?(q.value=e,Q.value=r,ee.value=Math.ceil(e.length/F.value),te.value=e.length):q.value=[]}catch(e){console.error("Failed to load users:",e)}finally{O.value=!1}},ve=async()=>{try{const r=await $(),t=(Array.isArray(r)?r:[]).filter((w,$e,Ve)=>$e===Ve.findIndex(Me=>Me.id===w.id));E.value=t}catch(r){console.error("Failed to load roles:",r),E.value=[]}},fe=ne(()=>q.value);X(j,((r,e)=>{let t;return(...w)=>{clearTimeout(t),t=setTimeout(()=>r(...w),e)}})(()=>{(m.hasPermission("user.view")||m.isAdmin||m.isManager)&&f()},300));const xe=async r=>{try{const e=r.status==="active"?"inactive":"active";await i(r.id,{status:e}),await f()}catch(e){console.error("Failed to toggle user status:",e)}},he=r=>{g.value={...r,role:r.roles&&r.roles.length>0?r.roles[0].name:""},R.value=!0},se=()=>{l.value={name:"",username:"",email:"",password:"",password_confirmation:"",role:"",status:"active"}},be=async()=>{try{if(!l.value.name||!l.value.username||!l.value.email||!l.value.password||!l.value.password_confirmation||!l.value.role){await y("請填寫所有必要欄位");return}if(l.value.password!==l.value.password_confirmation){await y("密碼確認不相符");return}if(l.value.password.length<6){await y("密碼長度至少需要6個字元");return}(await N({name:l.value.name,username:l.value.username,email:l.value.email,password:l.value.password,password_confirmation:l.value.password_confirmation,role:l.value.role,status:l.value.status}))?.success!==!1&&(await A("使用者建立成功"),T.value=!1,se(),await f())}catch(r){if(console.error("Failed to create user:",r),r?.errors){const e=[];for(const t in r.errors)e.push(`${t}: ${r.errors[t].join(", ")}`);await y(`表單驗證失敗:
${e.join(`
`)}`)}else r?.message?await y(`新增用戶失敗: ${r.message}`):r?.error?await y(`系統錯誤: ${r.error}`):await y("新增用戶失敗，請重試")}},we=async()=>{try{await i(g.value.id,{name:g.value.name,email:g.value.email}),g.value.role&&await V(g.value.id,g.value.role),R.value=!1,await f()}catch(r){console.error("Failed to update user:",r),await y("更新用戶失敗，請重試")}},_e=async r=>{if(confirm("確定要刪除此用戶嗎？此操作無法復原。"))try{await x(r.id),await f()}catch(e){console.error("Failed to delete user:",e),await y("刪除用戶失敗，請重試")}},ke=async()=>{try{Y.value=!0,await f()}finally{Y.value=!1}},Ce=async r=>{U.value=r,v.value=[],h.value="",b.value="unassigned",I.value=!0,await re()},ae=()=>{I.value=!1,U.value=null,S.value=[],v.value=[],h.value=""},re=async()=>{try{W.value=!0;const r={};b.value==="unassigned"&&(r.assigned_to="null"),h.value.trim()&&(r.search=h.value.trim());const{data:e,error:t}=await de(r);if(t){console.error("Failed to load customers:",t),S.value=[];return}S.value=e.data||[]}catch(r){console.error("Load customers error:",r),S.value=[]}finally{W.value=!1}},oe=ne(()=>{let r=S.value;if(b.value==="unassigned"&&(r=r.filter(e=>!e.assigned_to||e.assigned_to===null)),h.value.trim()){const e=h.value.toLowerCase();r=r.filter(t=>t.name.toLowerCase().includes(e)||t.phone.toLowerCase().includes(e)||t.email&&t.email.toLowerCase().includes(e))}return r}),Ue=async()=>{if(!(!U.value||v.value.length===0))try{L.value=!0;const r=v.value.map(e=>ce(e,U.value.id));await Promise.all(r),await A(`成功指派 ${v.value.length} 位客戶給 ${U.value.name}`),ae()}catch(r){console.error("Failed to assign customers:",r),await y("指派客戶失敗，請重試")}finally{L.value=!1}};return X([b,h],()=>{I.value&&re()}),ue(()=>{(m.hasPermission("user.view")||m.isAdmin||m.isManager)&&(f(),ve())}),(r,e)=>(u(),d(z,null,[s("div",Qe,[!a(m).hasPermission("user.view")&&!a(m).isAdmin&&!a(m).isManager?(u(),d("div",Ze,[M(a(Ie),{class:"w-12 h-12 text-red-500 mx-auto mb-4"}),e[17]||(e[17]=s("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"存取被拒絕",-1)),e[18]||(e[18]=s("p",{class:"text-gray-600"},"您沒有權限使用此功能",-1))])):(u(),G(Fe,{key:1,title:"用戶管理",columns:me,data:a(fe),loading:a(O),"search-query":a(j),"search-placeholder":"搜尋用戶...","current-page":a(Q),"items-per-page":a(F),"loading-text":"載入用戶資料中...","empty-text":"沒有找到用戶",onSearch:ge,onRefresh:ke,onRetry:f,onPageChange:pe,onPageSizeChange:ye},{actions:P(()=>[s("button",{onClick:e[0]||(e[0]=t=>T.value=!0),class:"inline-flex items-center px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors duration-200"},[M(a(De),{class:"w-5 h-5 mr-2"}),Ae(" "+o(a(n)("auth.add_user")),1)])]),"cell-user":P(({item:t})=>[s("div",Ge,[s("img",{src:t.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(t.name)}&background=6366f1&color=fff`,alt:t.name,class:"w-10 h-10 rounded-full"},null,8,He),s("div",Je,[s("div",Ke,o(t.name),1),s("div",Xe,o(t.email),1)])])]),"cell-role":P(({item:t})=>[s("span",{class:K(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",{"bg-purple-100 text-purple-800":t.roles?.[0]?.name==="admin"||t.roles?.[0]?.name==="executive","bg-blue-100 text-blue-800":t.roles?.[0]?.name==="manager","bg-green-100 text-green-800":t.roles?.[0]?.name==="staff"}])},o(t.roles?.[0]?.display_name||t.roles?.[0]?.name||"無角色"),3)]),"cell-status":P(({item:t})=>[s("span",{class:K(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",{"bg-green-600 text-white":t.status==="active","bg-red-600 text-white":t.status==="inactive","bg-yellow-600 text-white":t.status==="suspended"}])},o(a(n)(`auth.status_${t.status}`)),3)]),"cell-actions":P(({item:t})=>[s("div",Ye,[t.id!==a(m).user?.id?(u(),d("button",{key:0,onClick:w=>xe(t),class:K(["p-2 rounded-lg transition-all duration-200 group relative",t.status==="active"?"text-orange-600 hover:text-orange-800 hover:bg-orange-50":"text-green-600 hover:text-green-800 hover:bg-green-50"]),title:t.status==="active"?"停用用戶":"啟用用戶"},[t.status==="active"?(u(),G(a(Ne),{key:0,class:"w-4 h-4"})):(u(),G(a(Oe),{key:1,class:"w-4 h-4"})),s("span",tt,o(t.status==="active"?"停用":"啟用"),1)],10,et)):_("",!0),t.roles?.[0]?.name==="staff"&&a(m).hasPermission("customer_management")?(u(),d("button",{key:1,onClick:w=>Ce(t),class:"p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-lg transition-all duration-200 group relative",title:"指派客戶"},[M(a(Le),{class:"w-4 h-4"}),e[19]||(e[19]=s("span",{class:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap"}," 指派客戶 ",-1))],8,st)):_("",!0),s("button",{onClick:w=>he(t),class:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-all duration-200 group relative",title:"編輯用戶"},[M(a(Pe),{class:"w-4 h-4"}),e[20]||(e[20]=s("span",{class:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap"}," 編輯 ",-1))],8,at),t.id!==a(m).user?.id?(u(),d("button",{key:2,onClick:w=>_e(t),class:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-all duration-200 group relative",title:"刪除用戶"},[M(a(ze),{class:"w-4 h-4"}),e[21]||(e[21]=s("span",{class:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap"}," 刪除 ",-1))],8,rt)):_("",!0)])]),_:1},8,["data","loading","search-query","current-page","items-per-page"]))]),a(T)?(u(),d("div",ot,[s("div",lt,[s("h3",nt,o(a(n)("auth.add_user")),1),s("div",it,[s("div",null,[s("label",ut,o(a(n)("auth.full_name")),1),p(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>a(l).name=t),type:"text",required:"",class:"w-full px-3 py-2 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white text-gray-900"},null,512),[[C,a(l).name]])]),s("div",null,[s("label",dt,o(a(n)("auth.username")),1),p(s("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>a(l).username=t),type:"text",required:"",class:"w-full px-3 py-2 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white text-gray-900"},null,512),[[C,a(l).username]])]),s("div",null,[s("label",ct,o(a(n)("auth.email")),1),p(s("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>a(l).email=t),type:"email",required:"",class:"w-full px-3 py-2 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white text-gray-900"},null,512),[[C,a(l).email]])]),s("div",null,[s("label",mt,o(a(n)("auth.password")),1),p(s("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>a(l).password=t),type:"password",required:"",minlength:"6",class:"w-full px-3 py-2 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white text-gray-900"},null,512),[[C,a(l).password]])]),s("div",null,[s("label",gt,o(a(n)("auth.confirm_password")),1),p(s("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>a(l).password_confirmation=t),type:"password",required:"",minlength:"6",class:"w-full px-3 py-2 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white text-gray-900"},null,512),[[C,a(l).password_confirmation]])]),s("div",null,[s("label",pt,o(a(n)("auth.role")),1),p(s("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>a(l).role=t),required:"",class:"w-full px-3 py-2 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white text-gray-900"},[e[22]||(e[22]=s("option",{value:""},"選擇角色",-1)),(u(!0),d(z,null,J(a(E),t=>(u(),d("option",{key:t.id,value:t.name},o(t.display_name),9,yt))),128))],512),[[H,a(l).role]])]),s("div",null,[s("label",vt,o(a(n)("auth.status")),1),p(s("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>a(l).status=t),class:"w-full px-3 py-2 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white text-gray-900"},[...e[23]||(e[23]=[s("option",{value:"active"},"啟用",-1),s("option",{value:"inactive"},"停用",-1),s("option",{value:"suspended"},"暫停",-1)])],512),[[H,a(l).status]])])]),s("div",ft,[s("button",{onClick:e[8]||(e[8]=t=>{T.value=!1,se()}),class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200"},o(a(n)("common.cancel")),1),s("button",{onClick:be,class:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors duration-200"},o(a(n)("common.create")),1)])])])):_("",!0),a(R)?(u(),d("div",xt,[s("div",ht,[s("h3",bt,o(a(n)("auth.edit_user")),1),s("div",wt,[s("div",null,[s("label",_t,o(a(n)("auth.full_name")),1),p(s("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>a(g).name=t),type:"text",class:"w-full px-3 py-2 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white text-gray-900"},null,512),[[C,a(g).name]])]),s("div",null,[s("label",kt,o(a(n)("auth.email")),1),p(s("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>a(g).email=t),type:"email",class:"w-full px-3 py-2 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white text-gray-900"},null,512),[[C,a(g).email]])]),a(g).id!==a(m).user?.id?(u(),d("div",Ct,[s("label",Ut,o(a(n)("auth.role")),1),p(s("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>a(g).role=t),class:"w-full px-3 py-2 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white text-gray-900"},[(u(!0),d(z,null,J(a(E),t=>(u(),d("option",{key:t.id,value:t.name},o(t.display_name),9,$t))),128))],512),[[H,a(g).role]])])):_("",!0)]),s("div",Vt,[s("button",{onClick:e[12]||(e[12]=t=>R.value=!1),class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200"},o(a(n)("common.cancel")),1),s("button",{onClick:we,class:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors duration-200"},o(a(n)("common.save")),1)])])])):_("",!0),a(I)?(u(),d("div",Mt,[s("div",At,[s("h3",St," 指派客戶給 "+o(a(U)?.name),1),s("div",Ft,[s("div",Pt,[p(s("input",{"onUpdate:modelValue":e[13]||(e[13]=t=>D(h)?h.value=t:null),type:"text",placeholder:"搜尋客戶...",class:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 bg-white text-gray-900"},null,512),[[C,a(h)]]),M(a(Be),{class:"w-5 h-5 text-gray-500 absolute left-3 top-2.5"})])]),s("div",jt,[s("label",Rt,[p(s("input",{type:"radio","onUpdate:modelValue":e[14]||(e[14]=t=>D(b)?b.value=t:null),value:"unassigned",class:"mr-2"},null,512),[[ie,a(b)]]),e[24]||(e[24]=s("span",{class:"text-sm text-gray-700"},"僅顯示未分配客戶",-1))]),s("label",Tt,[p(s("input",{type:"radio","onUpdate:modelValue":e[15]||(e[15]=t=>D(b)?b.value=t:null),value:"all",class:"mr-2"},null,512),[[ie,a(b)]]),e[25]||(e[25]=s("span",{class:"text-sm text-gray-700"},"顯示所有客戶",-1))])]),a(W)?(u(),d("div",qt,[...e[26]||(e[26]=[s("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500 mx-auto mb-4"},null,-1),s("p",{class:"text-gray-600"},"載入客戶資料中...",-1)])])):(u(),d("div",Et,[(u(!0),d(z,null,J(a(oe),t=>(u(),d("div",{key:t.id,class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50"},[s("div",It,[p(s("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":e[16]||(e[16]=w=>D(v)?v.value=w:null),class:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"},null,8,Lt),[[Se,a(v)]]),s("div",null,[s("div",zt,o(t.name),1),s("div",Dt,o(t.phone)+" · "+o(t.region||"未填寫地區"),1)])]),s("div",Bt,[t.assigned_user?(u(),d("span",Nt," 目前負責："+o(t.assigned_user.name),1)):(u(),d("span",Ot," 未分配 "))])]))),128)),a(oe).length===0?(u(),d("div",Wt,[...e[27]||(e[27]=[s("p",{class:"text-gray-500"},"沒有找到符合條件的客戶",-1)])])):_("",!0)])),a(v).length>0?(u(),d("div",Qt,[s("p",Zt," 已選擇 "+o(a(v).length)+" 位客戶將指派給 "+o(a(U)?.name),1)])):_("",!0),s("div",Gt,[s("button",{onClick:ae,class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200"}," 取消 "),s("button",{onClick:Ue,disabled:a(v).length===0||a(L),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},o(a(L)?"指派中...":`指派 ${a(v).length} 位客戶`),9,Ht)])])])):_("",!0)],64))}};export{us as default};
