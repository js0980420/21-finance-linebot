const u=i=>{try{return new URL(i).hostname}catch{return i||""}};function m(i){const a=n=>{if(!n)return{name:"-",domain:"",website:null};const e=u(n),t=i.value.find(r=>{if(r.domain===e)return!0;const o=e.replace(/^www\./,""),s=r.domain.replace(/^www\./,"");return!!(o===s||n.includes(r.domain)||e.includes(r.domain)||r.domain.includes(e))});return t?{name:t.name,domain:t.domain,website:t}:{name:e||n,domain:e||n,website:null}};return{getWebsiteInfo:a,getWebsiteName:n=>{try{if(!n)return console.warn("getWebsiteName received null or undefined item"),"未知網站 (無項目)";const e=n.payload?.頁面_URL||n.source;if(!e)return console.warn("getWebsiteName received item without valid URL:",n),"未知網站 (無URL)";const t=a(e);return!t||!t.name?(console.warn("getWebsiteInfo returned invalid data for URL:",e,t),"未知網站 (無名稱)"):t.name}catch(e){return console.error("Error in getWebsiteName:",e,"Item:",n),"未知網站 (錯誤)"}}}}export{m as u};
