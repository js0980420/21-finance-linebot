import w from"./D3cojo9C.js";import{l as A,r as u,c as d,a as s,x as c,j as r,t as n,d as e,e as C,k as N,s as E,o as m}from"#entry";import{a as B}from"./DgLT0ASK.js";import"./Dc4_b61V.js";import"./-Op9ZE8F.js";import"./C1TBPVO2.js";import"./0es6LyBp.js";import"./BJ2ClxiI.js";import"./Cd8xZgT4.js";import"./mD2okE1y.js";import"./CI5qNQA5.js";import"./CHOj1P8S.js";const I={class:"p-8"},P={class:"max-w-2xl mx-auto"},R={class:"bg-white rounded-lg shadow-sm p-6 space-y-4"},U={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},V={class:"bg-gray-50 p-3 rounded text-sm"},D={class:"bg-blue-50 p-3 rounded text-sm"},L={class:"block mt-1 text-blue-800 break-all"},O={class:"flex items-center space-x-4"},S={key:0,class:"bg-gray-50 p-4 rounded"},T={class:"text-xs overflow-x-auto"},Y={__name:"test-api-url",setup(h){const{apiRequest:g}=B(),p=A(),f=p.public.nodeEnv||"unknown",v=!1,x=!0,b=window.location.hostname,_=p.public.apiBaseUrl||"未設定",i=u(!1),l=u(null),a=u(null),y=async()=>{i.value=!0,l.value=null,a.value=null;try{const o=await g("GET","/health");o.data?(l.value={success:!0,message:"連線成功！"},a.value=o.data):(l.value={success:!1,message:"連線失敗: "+(o.error?.message||"未知錯誤")},a.value=o.error)}catch(o){l.value={success:!1,message:"連線錯誤: "+o.message},a.value={error:o.message}}finally{i.value=!1}};return(o,t)=>{const k=w;return m(),d("div",I,[s("div",P,[t[10]||(t[10]=s("h1",{class:"text-2xl font-bold mb-6"},"API URL 測試頁面",-1)),s("div",R,[s("div",U,[s("div",null,[t[4]||(t[4]=s("h3",{class:"font-semibold text-gray-700 mb-2"},"環境資訊",-1)),s("div",V,[s("p",null,[t[0]||(t[0]=s("strong",null,"NODE_ENV:",-1)),r(" "+n(e(f)),1)]),s("p",null,[t[1]||(t[1]=s("strong",null,"開發模式:",-1)),r(" "+n(e(v)?"是":"否"),1)]),s("p",null,[t[2]||(t[2]=s("strong",null,"客戶端:",-1)),r(" "+n(e(x)?"是":"否"),1)]),s("p",null,[t[3]||(t[3]=s("strong",null,"當前域名:",-1)),r(" "+n(e(b)),1)])])]),s("div",null,[t[6]||(t[6]=s("h3",{class:"font-semibold text-gray-700 mb-2"},"API 設定",-1)),s("div",D,[t[5]||(t[5]=s("p",null,[s("strong",null,"檢測到的 API URL:")],-1)),s("code",L,n(e(_)),1)])])]),s("div",null,[t[8]||(t[8]=s("h3",{class:"font-semibold text-gray-700 mb-2"},"API 連線測試",-1)),s("div",O,[C(k,{onClick:y,loading:e(i)},{default:N(()=>[...t[7]||(t[7]=[r(" 測試 API 連線 ",-1)])]),_:1},8,["loading"]),e(l)?(m(),d("span",{key:0,class:E(e(l).success?"text-green-600":"text-red-600")},n(e(l).message),3)):c("",!0)])]),e(a)?(m(),d("div",S,[t[9]||(t[9]=s("h4",{class:"font-semibold mb-2"},"詳細資訊:",-1)),s("pre",T,n(JSON.stringify(e(a),null,2)),1)])):c("",!0)])])])}}};export{Y as default};
