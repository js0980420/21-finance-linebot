import{a_ as _,a$ as o,p as u,n as e}from"#entry";import{u as g}from"./DgLT0ASK.js";const p=_(async n=>{let a,t;const s=g();try{[a,t]=o(()=>u()),await a,t(),[a,t]=o(()=>s.waitForInitialization()),await a,t()}catch(l){return console.error("Role middleware 初始化失敗:",l),e("/auth/login")}if(!s.isLoggedIn)return e("/auth/login");const i={"/dashboard":["dashboard","all_access"],"/dashboard/analytics":["dashboard","all_access"],"/cases":["customer_management","all_access"],"/sales":["customer_management","personal_customers","all_access"],"/sales/customers":["customer_management","personal_customers","all_access"],"/sales/reports":["reports","all_access"],"/sales/statistics":["reports","all_access"],"/bank-records":["all_access"],"/reports":["reports","all_access"],"/reports/sales":["reports","all_access"],"/reports/customers":["reports","all_access"],"/reports/performance":["reports","all_access"],"/chat":["chat","all_access"],"/settings":["settings","user_management","all_access"],"/settings/system":["settings","all_access"],"/settings/users":["user_management","all_access"],"/settings/permissions":["all_access"],"/settings/theme":["settings","user_management","all_access"],"/settings/ui":["settings","user_management","all_access"],"/settings/websites":["all_access"]},r=n.path,c=i[r];if(c&&!c.some(m=>s?.hasPermission?s.hasPermission(m):!1))return s.isSales?e("/sales/customers"):s.isAdmin?e("/dashboard/analytics"):e("/dashboard/analytics");r.startsWith("/sales/customers")&&s.isSales});export{p as default};
