import{_ as ae}from"./0es6LyBp.js";import{c as r,o as s,a as e,r as $,b as L,E as N,x as m,e as b,k as B,R as X,d as t,t as g,s as C,F as U,q as V,aF as W,X as ne,_ as me,M as Y,y as he,i as K,C as le,Q as fe,Y as pe,m as ve,j as F,f as xe,g as ye,A as be,v as we,ai as ke}from"#entry";import{r as q,b as _e,a as ie}from"./EQ4Iz6fV.js";import{a as ce,r as Ce,b as $e}from"./ucBMxYjt.js";import{r as Me}from"./CoNy8hcY.js";import{r as Se}from"./BSBtNZZQ.js";import{u as Ie}from"./l19cjJOa.js";import{u as de}from"./COgQ22Wk.js";import{u as ue}from"./DgLT0ASK.js";import{u as Ne}from"./DQZituR6.js";import{r as je}from"./DWNj0d99.js";import{s as Ae}from"./BzLCLO6P.js";import{r as se}from"./CKFK7sG5.js";import{r as Te}from"./BC8p3SKJ.js";import{r as Be}from"./D4TV4JXr.js";import"./CaSEveCJ.js";function oe(o,l){return s(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})])}function De(o,l){return s(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})])}function Le(o,l){return s(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"})])}function ze(o,l){return s(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 6a7.5 7.5 0 1 0 7.5 7.5h-7.5V6Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 10.5H21A7.5 7.5 0 0 0 13.5 3v7.5Z"})])}function Re(o,l){return s(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})])}function Ee(o,l){return s(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"})])}function Ue(o,l){return s(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"})])}function Ve(o,l){return s(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"})])}const Pe={class:"relative"},Ze={key:2,class:"flex items-center justify-between flex-1 ml-3"},He={class:"flex items-center space-x-2"},Fe={class:"font-medium"},We={key:2,class:"flex items-center justify-between flex-1 ml-3"},Oe={class:"flex items-center space-x-2"},Qe={class:"font-medium"},qe={key:2,class:"absolute left-full top-0 ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50 whitespace-nowrap"},Xe={class:"flex items-center space-x-2"},Ye={key:0,class:"ml-8 mt-2 space-y-1 overflow-hidden"},re={__name:"SidebarMenuItem",props:{item:{type:Object,required:!0},collapsed:{type:Boolean,default:!1},badge:{type:Number,default:0},badgeColor:{type:String,default:"red",validator:o=>["red","green","blue","yellow","purple"].includes(o)},getBadgeCount:{type:Function,default:()=>()=>0},getBadgeColor:{type:Function,default:()=>()=>"red"}},setup(o){const l=o,c=$(!1),I=()=>{l.item.children&&!l.collapsed?c.value=!c.value:l.item.children&&l.collapsed},D=()=>{console.log("Navigating to:",l.item.href)},k={ChartBarIcon:q,CogIcon:Ce,QuestionMarkCircleIcon:Ue,DocumentTextIcon:ie,UserGroupIcon:_e,ChatBubbleLeftRightIcon:Se,BuildingLibraryIcon:Me,ChartPieIcon:ze},_=y=>k[y]||q,S=L(()=>{const y="inline-flex items-center justify-center text-xs font-bold text-white",M=l.collapsed?"w-4 h-4":"w-5 h-5";let w="",h="";switch(l.badgeColor){case"green":w="bg-green-500",h="rounded-md";break;case"red":default:w="bg-red-500",h="rounded-full";break}return[y,M,w,h]}),p=y=>l.getBadgeCount(y),z=y=>{const M=l.getBadgeColor(y),w="inline-flex items-center justify-center text-xs font-bold text-white ml-2",h="w-5 h-5";let j="",n="";switch(M){case"green":j="bg-green-500",n="rounded-md";break;case"red":default:j="bg-red-500",n="rounded-full";break}return[w,h,j,n]};return(y,M)=>{const w=ae;return s(),r("div",Pe,[o.item.href?(s(),N(w,{key:0,to:o.item.href,class:C(["w-full flex items-center px-3 py-2 text-white hover:bg-gray-700 hover:text-white rounded-lg transition-all duration-200 group",{"justify-center":o.collapsed}]),onClick:D},{default:B(()=>[_(o.item.icon)&&typeof _(o.item.icon)=="function"?(s(),N(X(_(o.item.icon)),{key:0,class:"w-5 h-5 text-white group-hover:text-white transition-colors duration-200"})):(s(),N(t(q),{key:1,class:"w-5 h-5 text-white group-hover:text-white transition-colors duration-200"})),o.collapsed?m("",!0):(s(),r("div",Ze,[e("div",He,[e("span",Fe,g(o.item.name),1),o.badge>0?(s(),r("span",{key:0,class:C(t(S))},g(o.badge>99?"99+":o.badge),3)):m("",!0)])]))]),_:1},8,["to","class"])):(s(),r("button",{key:1,onClick:I,class:C(["w-full flex items-center px-3 py-2 text-white hover:bg-gray-700 hover:text-white rounded-lg transition-all duration-200 group",{"justify-center":o.collapsed}])},[_(o.item.icon)&&typeof _(o.item.icon)=="function"?(s(),N(X(_(o.item.icon)),{key:0,class:"w-5 h-5 text-white group-hover:text-white transition-colors duration-200"})):(s(),N(t(q),{key:1,class:"w-5 h-5 text-white group-hover:text-white transition-colors duration-200"})),o.collapsed?m("",!0):(s(),r("div",We,[e("div",Oe,[e("span",Qe,g(o.item.name),1),o.badge>0?(s(),r("span",{key:0,class:C(t(S))},g(o.badge>99?"99+":o.badge),3)):m("",!0)]),o.item.children?(s(),N(t(ce),{key:0,class:C(["w-4 h-4 transition-transform duration-200",{"rotate-180":t(c)}])},null,8,["class"])):m("",!0)]))],2)),o.collapsed?(s(),r("div",qe,[e("div",Xe,[e("span",null,g(o.item.name),1),o.badge>0?(s(),r("span",{key:0,class:C(t(S))},g(o.badge>99?"99+":o.badge),3)):m("",!0)])])):m("",!0),b(W,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-96","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 max-h-96","leave-to-class":"opacity-0 max-h-0"},{default:B(()=>[t(c)&&!o.collapsed&&o.item.children?(s(),r("div",Ye,[(s(!0),r(U,null,V(o.item.children,h=>(s(),N(w,{key:h.name,to:h.href,class:"flex items-center justify-between px-3 py-2 text-sm text-white opacity-80 hover:text-white hover:opacity-100 hover:bg-gray-700 rounded-lg transition-all duration-200"},{default:B(()=>[e("span",null,g(h.name),1),p(h)>0?(s(),r("span",{key:0,class:C(z(h))},g(p(h)>99?"99+":p(h)),3)):m("",!0)]),_:2},1032,["to"]))),128))])):m("",!0)]),_:1})])}}},ee=ne("sidebar",()=>{const o=$(!1),l=$(!1);return{sidebarCollapsed:o,sidebarMobileOpen:l,toggleSidebar:()=>{o.value=!o.value},toggleMobileSidebar:()=>{l.value=!l.value},closeMobileSidebar:()=>{l.value=!1}}}),Ge={class:"h-16 flex items-center justify-center border-b border-gray-600"},Je={key:0,class:"text-center"},Ke={key:1,class:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center"},et={class:"flex-1 px-4 py-6 space-y-2 overflow-y-auto"},tt={class:"p-4 border-t border-gray-600"},st={key:0,class:"mb-3 text-center"},ot={class:"text-sm text-white"},rt={class:"text-xs text-white opacity-80"},at={key:0,class:"ml-3"},nt={class:"h-16 flex items-center justify-between px-4 border-b border-gray-600"},lt={class:"flex-1 px-4 py-6 space-y-2 overflow-y-auto"},it={class:"p-4 border-t border-gray-600"},ct={key:0,class:"mb-3 text-center"},dt={class:"text-sm text-white"},ut={class:"text-xs text-white opacity-80"},gt={__name:"AppSidebar",setup(o){const l=ee(),{sidebarCollapsed:c,sidebarMobileOpen:I}=Y(l),{toggleSidebar:D,closeMobileSidebar:k}=l,_=de(),{sidebarMenuItems:S}=Y(_),p=ue(),{cases:z}=Ie();he(z,f=>{});const{badges:y}=Ne(),M=f=>f.badge?y.value[f.badge]||z.value?.countByStatus?.[f.badge]||0:f.children?f.children.reduce((i,v)=>i+M(v),0):0,w=f=>f.badgeType||"red",h=$(!1),j=$(null),n=$(null),u=$(240),x=$(!1);K(async()=>{h.value=!0;const f=localStorage.getItem("sidebar-width");f&&(u.value=parseInt(f))}),le(()=>{});const A=L(()=>{if(!h.value||!p.isLoggedIn||!p.user)return[];const f=i=>{try{return!!p?.hasPermission?.(i)}catch{return!1}};return S.value.filter(i=>i.permissions&&i.permissions.length>0?i.permissions.some(v=>f(v)):!0).map(i=>{if(i.children){const v=i.children.filter(H=>H.permissions&&H.permissions.length>0?H.permissions.some(J=>p.hasPermission(J)):!0);return{...i,children:v}}return i}).filter(i=>!(i.children&&i.children.length===0&&!i.href))}),E=f=>({admin:"系統管理員",executive:"經銷商/公司高層",manager:"行政人員/主管",staff:"業務人員"})[f]||f,P=()=>{p.logout()},G=f=>{x.value=!0,document.addEventListener("mousemove",O),document.addEventListener("mouseup",Q),document.body.style.cursor="col-resize",document.body.style.userSelect="none",f.preventDefault()},O=f=>{if(!x.value)return;const i=Math.max(200,Math.min(400,f.clientX));u.value=i},Q=()=>{x.value=!1,document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",Q),document.body.style.cursor="",document.body.style.userSelect="",localStorage.setItem("sidebar-width",u.value.toString())};return(f,i)=>(s(),r("div",null,[e("aside",{ref_key:"sidebar",ref:j,class:C(["fixed top-0 left-0 h-full bg-[#2c2c2c] shadow-lg transition-all duration-300 z-40 hidden lg:flex lg:flex-col",[t(c)?"w-20":""]]),style:fe(t(c)?{}:{width:t(u)+"px"})},[e("div",Ge,[t(c)?(s(),r("div",Ke,[...i[3]||(i[3]=[e("span",{class:"text-white font-bold text-sm"},"金",-1)])])):(s(),r("div",Je,[...i[2]||(i[2]=[e("div",{class:"text-xl font-bold text-white"}," 貸款案件管理系統 ",-1)])]))]),e("nav",et,[(s(!0),r(U,null,V(t(A),v=>(s(),N(re,{key:v.name,item:v,collapsed:t(c),badge:M(v),"badge-color":w(v),"get-badge-count":M,"get-badge-color":w},null,8,["item","collapsed","badge","badge-color"]))),128))]),e("div",tt,[!t(c)&&t(h)&&t(p).user?(s(),r("div",st,[e("div",ot,g(t(p).user.name),1),e("div",rt,g(E(t(p).user.role)),1)])):m("",!0),e("button",{onClick:P,class:C(["w-full flex items-center px-3 py-2 text-red-200 bg-red-900/20 hover:bg-red-600 hover:text-white rounded-lg transition-all duration-200 border border-red-700/50 font-medium",{"justify-center":t(c)}])},[b(t(oe),{class:"w-5 h-5"}),t(c)?m("",!0):(s(),r("span",at,"登出"))],2)]),t(c)?m("",!0):(s(),r("div",{key:0,ref_key:"resizeHandle",ref:n,class:"absolute right-0 top-0 bottom-0 w-1 bg-gray-600 hover:bg-gray-500 cursor-col-resize opacity-0 hover:opacity-100 transition-opacity duration-200",onMousedown:G},null,544))],6),t(I)?(s(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:i[0]||(i[0]=(...v)=>t(k)&&t(k)(...v))})):m("",!0),e("aside",{class:C(["fixed top-0 left-0 h-full w-70 bg-[#2c2c2c] shadow-lg transition-transform duration-300 z-50 lg:hidden flex flex-col",[t(I)?"translate-x-0":"-translate-x-full"]])},[e("div",nt,[i[4]||(i[4]=e("div",{class:"text-left"},[e("div",{class:"text-xl font-bold text-white"}," 貸款案件管理系統 ")],-1)),e("button",{onClick:i[1]||(i[1]=(...v)=>t(k)&&t(k)(...v)),class:"p-2 hover:bg-gray-700 rounded-lg text-white hover:text-white"},[b(t(je),{class:"w-5 h-5"})])]),e("nav",lt,[(s(!0),r(U,null,V(t(A),v=>(s(),N(re,{key:v.name,item:v,collapsed:!1,badge:M(v),"badge-color":w(v),"get-badge-count":M,"get-badge-color":w,onClick:t(k)},null,8,["item","badge","badge-color","onClick"]))),128))]),e("div",it,[t(h)&&t(p).user?(s(),r("div",ct,[e("div",dt,g(t(p).user.name),1),e("div",ut,g(E(t(p).user.role)),1)])):m("",!0),e("button",{onClick:P,class:"w-full flex items-center px-3 py-2 text-red-200 bg-red-900/20 hover:bg-red-600 hover:text-white rounded-lg transition-all duration-200 border border-red-700/50 font-medium"},[b(t(oe),{class:"w-5 h-5"}),i[5]||(i[5]=e("span",{class:"ml-3"},"登出",-1))])])],2)]))}},mt=me(gt,[["__scopeId","data-v-8674c254"]]),ht=ne("notifications",()=>{const o=new Date("2024-08-08T12:00:00Z");let l=null;const c=$([{id:1,type:"system",title:"notifications.system_update",message:"A new system update is available. Please update to get the latest features.",time:new Date(o.getTime()-300*1e3),read:!0,priority:"high",icon:"ExclamationCircleIcon"},{id:2,type:"user",title:"notifications.user_registration",message:'New user "john.doe@example.com" has registered.',time:new Date(o.getTime()-600*1e3),read:!0,priority:"medium",icon:"UserPlusIcon"},{id:3,type:"report",title:"notifications.daily_report",message:"Your daily analytics report is ready for review.",time:new Date(o.getTime()-3600*1e3),read:!0,priority:"low",icon:"DocumentTextIcon"},{id:4,type:"security",title:"Security Alert",message:"Unusual login activity detected from a new device.",time:new Date(o.getTime()-7200*1e3),read:!0,priority:"high",icon:"ShieldExclamationIcon"},{id:5,type:"overdue",title:"notifications.task_overdue",message:'Task "Complete project report" is overdue.',time:new Date(o.getTime()-4320*60*1e3),dueDate:new Date(o.getTime()-1440*60*1e3),read:!1,priority:"high",icon:"ClockIcon"}]),I=L(()=>c.value.filter(n=>!n.read).length),D=L(()=>c.value.filter(n=>!n.read&&n.dueDate&&new Date(n.dueDate)<new Date)),k=L(()=>c.value.filter(n=>n.priority==="high"&&!n.read).slice(0,3)),_=L(()=>c.value.sort((n,u)=>u.time-n.time).slice(0,5)),S=n=>{const u={id:Date.now(),type:n.type||"info",title:n.title,message:n.message,time:new Date,read:!1,priority:n.priority||"medium",icon:n.icon||"InformationCircleIcon",dueDate:n.dueDate||null};c.value.unshift(u),n.autoRemove!==!1&&setTimeout(()=>{y(u.id)},3e4)},p=n=>{const u=c.value.find(x=>x.id===n);u&&(u.read=!0)},z=()=>{c.value.forEach(n=>{n.read=!0})},y=n=>{const u=c.value.findIndex(x=>x.id===n);u>-1&&c.value.splice(u,1)},M=()=>{c.value=[]},w=()=>{c.value=c.value.filter(n=>!n.read)},h=n=>{const x=new Date-n,A=Math.floor(x/(1e3*60)),E=Math.floor(x/(1e3*60*60)),P=Math.floor(x/(1e3*60*60*24));return A<1?"剛剛":A<60?`${A} 分鐘前`:E<24?`${E} 小時前`:`${P} 天前`},j=()=>{l&&clearInterval(l);const n=[{type:"user",title:"新用戶註冊",message:"一位新用戶已加入平台。",priority:"medium",icon:"UserPlusIcon"},{type:"system",title:"系統維護通知",message:"預計於1小時後進行系統維護。",priority:"high",icon:"WrenchScrewdriverIcon"},{type:"report",title:"每週報告已就緒",message:"您的每週分析報告已準備就緒。",priority:"low",icon:"DocumentTextIcon"}];l=Ae(()=>{if(Math.random()>.7){const u=n[Math.floor(Math.random()*n.length)];S(u)}},3e4+Math.random()*9e4)};return K(()=>{j()}),le(()=>{l&&clearInterval(l)}),{notifications:pe(c),unreadCount:I,priorityNotifications:k,recentNotifications:_,addNotification:S,markAsRead:p,markAllAsRead:z,removeNotification:y,clearAllNotifications:M,clearReadNotifications:w,getTimeAgo:h,simulateRealTimeNotifications:j,overdueNotifications:D}}),ft={class:"h-16 bg-white border-b border-gray-200 px-6 flex items-center justify-between"},pt={class:"flex items-center space-x-4"},vt={class:"hidden lg:flex items-center space-x-4"},xt={class:"text-xl font-bold text-gray-900"},yt={class:"flex","aria-label":"Breadcrumb"},bt={class:"flex items-center space-x-2 text-sm"},wt={key:1,class:"text-gray-700 font-medium"},kt={class:"flex items-center space-x-3"},_t={class:"relative"},Ct={key:0,class:"absolute right-0 top-full mt-2 w-48 bg-gray-800 rounded-lg shadow-lg border border-gray-600 py-2 z-50"},$t=["onClick"],Mt={class:"text-lg mr-2"},St={class:"relative"},It={key:0,class:"absolute -top-1 -right-1 min-w-[18px] h-[18px] bg-blue-500 rounded-full flex items-center justify-center text-xs text-white font-bold"},Nt={key:0,class:"absolute right-0 top-full mt-2 w-96 bg-white rounded-lg shadow-xl z-50"},jt={class:"p-4 bg-gray-50 rounded-t-lg flex items-center justify-between"},At={class:"flex items-center space-x-2"},Tt={class:"max-h-80 overflow-y-auto"},Bt={key:0,class:"p-4 bg-red-100 text-red-800 font-semibold"},Dt=["onClick"],Lt={class:"flex items-start space-x-3"},zt={class:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center bg-red-200 text-red-700"},Rt={class:"flex-1 min-w-0"},Et={class:"text-sm font-medium text-red-900"},Ut={class:"text-sm mt-1 text-red-700"},Vt={class:"text-xs text-red-500 mt-1"},Pt={class:"flex-shrink-0"},Zt={key:0,class:"w-3 h-3 bg-red-500 rounded-full"},Ht={key:1,class:"border-t border-gray-200 my-2"},Ft=["onClick"],Wt={class:"flex items-start space-x-3"},Ot={class:"flex-1 min-w-0"},Qt={class:"text-xs text-gray-400 mt-1"},qt={class:"flex-shrink-0"},Xt={key:0,class:"w-3 h-3 bg-blue-500 rounded-full"},Yt={key:2,class:"p-8 text-center text-gray-500"},Gt={class:"p-3 bg-gray-50 rounded-b-lg"},Jt={class:"relative"},Kt={key:0,class:"absolute right-0 top-full mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50"},es={class:"p-4"},ts={__name:"AppNavbar",setup(o){const l=ve(),c=ee(),{toggleMobileSidebar:I}=c,D=ht(),{recentNotifications:k,unreadCount:_,markAsRead:S,markAllAsRead:p,clearReadNotifications:z,overdueNotifications:y}=D,M=L(()=>({"/":"儀表板","/dashboard":"儀表板","/dashboard/analytics":"數據分析","/sales/customers":"客戶資料","/tracking":"追蹤管理","/sales/applications":"進件資料","/sales/reports":"銷售報表","/sales/statistics":"業績統計","/settings":"設定","/settings/websites":"網站名稱管理","/settings/system":"系統設定","/settings/users":"用戶管理","/settings/permissions":"權限管理","/settings/line":"LINE 整合","/reports/website-performance":"每日網站績效","/reports/applications":"進件統計","/reports/disbursement":"撥款統計","/reports/sales":"銷售分析","/reports/customers":"客戶分析","/reports/accounting":"會計報表","/chat":"聊天室","/bank-records":"銀行交涉紀錄"})[l.path]||"頁面"),w=L(()=>M.value),h=L(()=>{const T=l.path.split("/").filter(a=>a),d=[];let R="";for(let a=0;a<T.length;a++){R+="/"+T[a];const ge={"/dashboard":"儀表板","/dashboard/analytics":"數據分析","/cases":"案件管理","/sales":"業務管理","/sales/customers":"客戶資料","/tracking":"追蹤管理","/sales/applications":"進件資料","/sales/reports":"銷售報表","/sales/statistics":"業績統計","/settings":"設定","/settings/websites":"網站名稱管理","/settings/system":"系統設定","/settings/users":"用戶管理","/settings/permissions":"權限管理","/settings/line":"LINE 整合","/reports":"統計報表","/reports/website-performance":"每日網站績效","/reports/applications":"進件統計","/reports/disbursement":"撥款統計","/reports/sales":"銷售分析","/reports/customers":"客戶分析","/reports/accounting":"會計報表","/chat":"聊天室","/bank-records":"銀行交涉紀錄"}[R]||T[a];d.push({name:ge,href:R})}return d}),j=$(!1),n=$(!1),u=$(!1),x=$(!1),A=$(""),E=$(null),P=L(()=>[{code:"zh-TW",name:"繁體中文",flag:"🇹🇼"},{code:"en",name:"English",flag:"🇺🇸"}]),G=()=>{j.value=!1,A.value=""},O=()=>{n.value=!n.value,u.value=!1,x.value=!1},Q=T=>{console.log("Language selected:",T.code),n.value=!1},f=()=>{u.value=!u.value,n.value=!1,x.value=!1},i=()=>{x.value=!x.value,n.value=!1,u.value=!1},v=()=>{x.value=!1},H=ue(),J=()=>{H.logout(),x.value=!1},te=T=>({ExclamationCircleIcon:Re,UserPlusIcon:Be,DocumentTextIcon:ie,ShieldExclamationIcon:Te,InformationCircleIcon:se,WrenchScrewdriverIcon:Ve})[T]||se;return K(()=>{document.addEventListener("click",T=>{T.target.closest(".relative")||(n.value=!1,u.value=!1,x.value=!1)})}),(T,d)=>{const R=ae;return s(),r("header",ft,[e("div",pt,[e("button",{onClick:d[0]||(d[0]=(...a)=>t(I)&&t(I)(...a)),class:"lg:hidden p-2 hover:bg-gray-100 rounded-lg"},[b(t(De),{class:"w-6 h-6"})]),e("div",vt,[e("h1",xt,g(t(w)),1),d[6]||(d[6]=e("div",{class:"h-6 w-px bg-gray-300"},null,-1)),e("nav",yt,[e("ol",bt,[e("li",null,[b(R,{to:"/",class:"text-gray-500 hover:text-primary-500 transition-colors duration-200"},{default:B(()=>[...d[5]||(d[5]=[F(" 首頁 ",-1)])]),_:1})]),(s(!0),r(U,null,V(t(h),(a,Z)=>(s(),r("li",{key:Z,class:"flex items-center"},[b(t($e),{class:"w-4 h-4 mx-2 text-gray-400"}),a.href&&Z<t(h).length-1?(s(),N(R,{key:0,to:a.href,class:"text-gray-500 hover:text-primary-500 transition-colors duration-200"},{default:B(()=>[F(g(a.name),1)]),_:2},1032,["to"])):(s(),r("span",wt,g(a.name),1))]))),128))])])])]),e("div",kt,[e("div",_t,[e("button",{onClick:O,class:"p-2 hover:bg-gray-700 rounded-lg transition-colors duration-200 group"},[b(t(Ee),{class:"w-5 h-5 text-gray-700 group-hover:text-white"})]),b(W,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:B(()=>[t(n)?(s(),r("div",Ct,[(s(!0),r(U,null,V(t(P),a=>(s(),r("button",{key:a.code,onClick:Z=>Q(a),class:"w-full text-left px-4 py-2 hover:bg-gray-700 transition-colors duration-200 text-white"},[e("span",Mt,g(a.flag),1),F(" "+g(a.name),1)],8,$t))),128))])):m("",!0)]),_:1})]),e("div",St,[e("button",{onClick:f,class:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200 relative group"},[b(t(Le),{class:"w-5 h-5 text-gray-700 group-hover:text-gray-900"}),t(_)>0?(s(),r("span",It,g(t(_)>99?"99+":t(_)),1)):m("",!0)]),b(W,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:B(()=>[t(u)?(s(),r("div",Nt,[e("div",jt,[d[7]||(d[7]=e("h3",{class:"font-semibold text-gray-900"},"通知",-1)),e("div",At,[e("button",{onClick:d[1]||(d[1]=(...a)=>t(p)&&t(p)(...a)),class:"text-xs text-blue-600 hover:text-blue-800 transition-colors duration-200 font-medium"}," 全部標記已讀 ")])]),e("div",Tt,[t(y).length>0?(s(),r("div",Bt," 逾期通知 ("+g(t(y).length)+") ",1)):m("",!0),(s(!0),r(U,null,V(t(y),a=>(s(),r("div",{key:a.id,class:"p-4 transition-colors duration-200 cursor-pointer bg-red-50 hover:bg-red-100",onClick:Z=>t(S)(a.id)},[e("div",Lt,[e("div",zt,[(s(),N(X(te(a.icon)),{class:"w-4 h-4"}))]),e("div",Rt,[e("p",Et,g(a.title),1),e("p",Ut,g(a.message),1),e("p",Vt,"逾期 "+g(t(D).getTimeAgo(a.dueDate)),1)]),e("div",Pt,[a.read?m("",!0):(s(),r("div",Zt))])])],8,Dt))),128)),t(k).length>0&&t(y).length>0?(s(),r("div",Ht)):m("",!0),(s(!0),r(U,null,V(t(k),a=>(s(),r("div",{key:a.id,class:C(["p-4 transition-colors duration-200 cursor-pointer",{"bg-blue-50 hover:bg-blue-100":!a.read,"bg-white hover:bg-gray-50":a.read}]),onClick:Z=>t(S)(a.id)},[e("div",Wt,[e("div",{class:C(["flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center",{"bg-red-100 text-red-600":a.priority==="high","bg-yellow-100 text-yellow-600":a.priority==="medium","bg-blue-100 text-blue-600":a.priority==="low"}])},[(s(),N(X(te(a.icon)),{class:"w-4 h-4"}))],2),e("div",Ot,[e("p",{class:C(["text-sm font-medium",{"text-gray-900":!a.read,"text-gray-600":a.read}])},g(a.title),3),e("p",{class:C(["text-sm mt-1",{"text-gray-700":!a.read,"text-gray-500":a.read}])},g(a.message),3),e("p",Qt,g(t(D).getTimeAgo(a.time)),1)]),e("div",qt,[a.read?m("",!0):(s(),r("div",Xt))])])],10,Ft))),128)),t(k).length===0&&t(y).length===0?(s(),r("div",Yt," 暫無通知 ")):m("",!0)]),e("div",Gt,[e("button",{onClick:d[2]||(d[2]=(...a)=>t(z)&&t(z)(...a)),class:"w-full text-center text-sm text-gray-600 hover:text-gray-800 transition-colors duration-200 font-medium"}," 清除所有 ")])])):m("",!0)]),_:1})]),e("div",Jt,[e("button",{onClick:i,class:"flex items-center space-x-2 p-1 hover:bg-gray-100 rounded-lg transition-colors duration-200"},[d[8]||(d[8]=e("img",{src:"https://ui-avatars.com/api/?name=Admin+User&background=6366f1&color=fff",alt:"User Avatar",class:"w-8 h-8 rounded-full"},null,-1)),b(t(ce),{class:"w-4 h-4 hidden sm:block"})]),b(W,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:B(()=>[t(x)?(s(),r("div",Kt,[b(R,{to:"/profile",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200",onClick:v},{default:B(()=>[...d[9]||(d[9]=[F(" 個人資料 ",-1)])]),_:1}),b(R,{to:"/settings",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200",onClick:v},{default:B(()=>[...d[10]||(d[10]=[F(" 設定 ",-1)])]),_:1}),d[11]||(d[11]=e("hr",{class:"my-1 border-gray-200"},null,-1)),e("button",{onClick:J,class:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200"}," 登出 ")])):m("",!0)]),_:1})])]),b(W,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:B(()=>[t(j)?(s(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center pt-20",onClick:G},[e("div",{class:"bg-white rounded-lg shadow-xl w-full max-w-lg mx-4",onClick:d[4]||(d[4]=xe(()=>{},["stop"]))},[e("div",es,[ye(e("input",{ref_key:"searchInput",ref:E,"onUpdate:modelValue":d[3]||(d[3]=a=>be(A)?A.value=a:null),type:"text",placeholder:"搜尋...",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"},null,512),[[we,t(A)]])])])])):m("",!0)]),_:1})])}}},ss={class:"min-h-screen bg-white"},os={class:"flex-1 p-6 overflow-auto"},bs={__name:"default",setup(o){const l=ee(),{sidebarCollapsed:c}=Y(l),I=de(),{showFootbar:D}=Y(I);return(k,_)=>{const S=mt,p=ts;return s(),r("div",ss,[b(S),e("div",{class:C(["min-h-screen flex flex-col main-content-area light-gradient-bg",{"sidebar-collapsed":t(c)}])},[b(p),e("main",os,[ke(k.$slots,"default")])],2)])}}};export{bs as default};
