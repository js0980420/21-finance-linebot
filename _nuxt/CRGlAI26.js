import{c as l,o as n,a as s,b,x as w,t as d,ai as f,E as T,s as c,d as i,e as k,j as h,aj as K,F as m,q as p,Q as L}from"#entry";import{r as z}from"./B5My0XuL.js";import{r as q}from"./CKtbBPOe.js";function D(a,x){return n(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"})])}function Pe(a,x){return n(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})])}const F={class:"bg-white rounded-xl shadow-sm border border-gray-200"},M={class:"p-6 border-b border-gray-200"},Q={class:"text-xl font-semibold text-gray-900 mb-4"},A={class:"flex items-center justify-between"},E={class:"flex items-center space-x-4"},R={class:"relative"},Z=["value","placeholder"],G={class:"flex items-center space-x-3"},H=["disabled"],J={class:"overflow-x-auto"},O={key:0,class:"p-8 text-center"},U={class:"mt-2 text-gray-600"},W={key:1,class:"p-8 text-center"},X={class:"text-red-600"},Y={key:2,class:"p-8 text-center"},_={class:"w-12 h-12 mx-auto mb-4 text-gray-400"},ee={class:"text-gray-500"},te={key:3,class:"min-w-full divide-y divide-gray-200 rounded-lg overflow-hidden"},se={class:"bg-gray-50"},re={class:"flex items-center space-x-1"},ae=["onClick"],oe={class:"bg-white divide-y divide-gray-200"},ne={key:0,class:"px-6 py-6 border-t border-gray-200 bg-gray-50 rounded-b-xl"},le={class:"flex items-center justify-between"},ie={class:"flex items-center space-x-4"},de={class:"text-sm text-gray-700"},ue={class:"font-medium"},ce={class:"font-medium"},ge={class:"font-medium"},ye={class:"flex items-center space-x-2"},be=["value"],he={class:"flex items-center space-x-2"},fe=["disabled"],me={class:"flex space-x-1"},pe=["onClick","disabled"],xe=["disabled"],$e={__name:"DataTable",props:{title:{type:String,required:!0},columns:{type:Array,required:!0},data:{type:Array,default:()=>[]},rowKey:{type:[String,Function],default:"id"},searchQuery:{type:String,default:""},searchPlaceholder:{type:String,default:"搜尋..."},showSearchIcon:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},error:{type:String,default:""},showPagination:{type:Boolean,default:!0},currentPage:{type:Number,default:1},itemsPerPage:{type:Number,default:10},loadingText:{type:String,default:"載入中..."},emptyText:{type:String,default:"沒有資料"},rowClass:{type:String,default:""}},emits:["search","refresh","retry","sort","page-change","page-size-change"],setup(a,{emit:x}){const o=a,$=x,v=b(()=>o.data.length),u=b(()=>Math.ceil(v.value/o.itemsPerPage)),C=b(()=>(o.currentPage-1)*o.itemsPerPage+1),S=b(()=>Math.min(o.currentPage*o.itemsPerPage,v.value)),B=b(()=>{if(!o.showPagination)return o.data;const r=(o.currentPage-1)*o.itemsPerPage,t=r+o.itemsPerPage;return o.data.slice(r,t)}),I=b(()=>{const r=[];if(u.value<=5)for(let e=1;e<=u.value;e++)r.push(e);else if(o.currentPage<=3){for(let e=1;e<=4;e++)r.push(e);r.push("..."),r.push(u.value)}else if(o.currentPage>=u.value-2){r.push(1),r.push("...");for(let e=u.value-3;e<=u.value;e++)r.push(e)}else{r.push(1),r.push("...");for(let e=o.currentPage-1;e<=o.currentPage+1;e++)r.push(e);r.push("..."),r.push(u.value)}return r}),V=(r,t)=>typeof o.rowKey=="function"?o.rowKey(r,t):r[o.rowKey]||t,P=(r,t)=>t.split(".").reduce((e,g)=>e?.[g],r),N=(r,t)=>{const e=P(r,t.key);return t.formatter&&typeof t.formatter=="function"?t.formatter(e,r):e},j=r=>{$("sort",r)};return(r,t)=>(n(),l("div",F,[s("div",M,[s("h2",Q,d(a.title),1),s("div",A,[s("div",E,[s("div",R,[s("input",{value:a.searchQuery,onInput:t[0]||(t[0]=e=>r.$emit("search",e.target.value)),type:"text",placeholder:a.searchPlaceholder,class:c([a.showSearchIcon?"pl-10 pr-4 py-2":"pl-4 pr-4 py-2","border border-gray-300 rounded-lg bg-white text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-w-64"])},null,42,Z),a.showSearchIcon?(n(),T(i(z),{key:0,class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"})):w("",!0)]),f(r.$slots,"filters")]),s("div",G,[f(r.$slots,"actions"),s("button",{onClick:t[1]||(t[1]=e=>r.$emit("refresh")),disabled:a.loading,class:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 transition-colors duration-200 disabled:opacity-50"},[k(i(K),{class:c(["w-4 h-4 mr-2",{"animate-spin":a.loading}])},null,8,["class"]),t[6]||(t[6]=h(" 重新整理 ",-1))],8,H)])])]),s("div",J,[a.loading?(n(),l("div",O,[t[7]||(t[7]=s("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)),s("p",U,d(a.loadingText),1)])):a.error?(n(),l("div",W,[s("p",X,d(a.error),1),s("button",{onClick:t[2]||(t[2]=e=>r.$emit("retry")),class:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," 重試 ")])):!a.data||a.data.length===0?(n(),l("div",Y,[s("div",_,[f(r.$slots,"empty-icon",{},()=>[k(i(q),{class:"w-full h-full"})])]),s("p",ee,d(a.emptyText),1)])):(n(),l("table",te,[s("thead",se,[s("tr",null,[(n(!0),l(m,null,p(a.columns,e=>(n(),l("th",{key:e.key,class:c(["px-3 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider",e.headerClass]),style:L(e.width?{width:e.width}:{})},[s("div",re,[s("span",null,d(e.title),1),e.sortable?(n(),l("button",{key:0,onClick:g=>j(e.key),class:"hover:text-gray-700"},[k(i(D),{class:"w-4 h-4"})],8,ae)):w("",!0)])],6))),128))])]),s("tbody",oe,[(n(!0),l(m,null,p(i(B),(e,g)=>(n(),l("tr",{key:V(e,g),class:c(["hover:bg-blue-50 transition-colors",a.rowClass])},[(n(!0),l(m,null,p(a.columns,y=>(n(),l("td",{key:y.key,class:c(["px-3 py-4 whitespace-nowrap text-base",y.cellClass])},[f(r.$slots,`cell-${y.key}`,{item:e,value:P(e,y.key),index:g},()=>[s("span",{class:c(y.textClass)},d(N(e,y)),3)])],2))),128))],2))),128))])]))]),a.showPagination&&i(u)>1?(n(),l("div",ne,[s("div",le,[s("div",ie,[s("p",de,[t[8]||(t[8]=h(" 顯示第 ",-1)),s("span",ue,d(i(C)),1),t[9]||(t[9]=h(" 到 ",-1)),s("span",ce,d(i(S)),1),t[10]||(t[10]=h(" 筆，共 ",-1)),s("span",ge,d(i(v)),1),t[11]||(t[11]=h(" 筆記錄 ",-1))]),s("div",ye,[t[13]||(t[13]=s("label",{class:"text-sm text-gray-700"},"每頁顯示：",-1)),s("select",{value:a.itemsPerPage,onChange:t[3]||(t[3]=e=>r.$emit("page-size-change",parseInt(e.target.value))),class:"text-sm border border-gray-300 rounded-md bg-white text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[12]||(t[12]=[s("option",{value:5},"5 筆",-1),s("option",{value:10},"10 筆",-1),s("option",{value:20},"20 筆",-1),s("option",{value:50},"50 筆",-1),s("option",{value:100},"100 筆",-1)])],40,be)])]),s("div",he,[s("button",{onClick:t[4]||(t[4]=e=>r.$emit("page-change",a.currentPage-1)),disabled:a.currentPage===1,class:"px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 bg-white hover:bg-blue-50 focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"}," 上一頁 ",8,fe),s("div",me,[(n(!0),l(m,null,p(i(I),e=>(n(),l("button",{key:e,onClick:g=>typeof e=="number"?r.$emit("page-change",e):null,class:c(["px-3 py-1 border text-sm rounded-md",e===a.currentPage?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-blue-50 focus:ring-2 focus:ring-blue-500",typeof e!="number"?"cursor-default":"cursor-pointer"]),disabled:typeof e!="number"},d(e),11,pe))),128))]),s("button",{onClick:t[5]||(t[5]=e=>r.$emit("page-change",a.currentPage+1)),disabled:a.currentPage===i(u),class:"px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 bg-white hover:bg-blue-50 focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"}," 下一頁 ",8,xe)])])])):w("",!0)]))}};export{$e as _,Pe as r};
