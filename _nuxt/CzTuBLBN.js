import{r as v,b as E,i as R,u as S,c as l,a as e,x as i,s as h,d as t,t as a,j as k,F as p,q as b,f as N,o}from"#entry";import{a as I}from"./DgLT0ASK.js";import{u as L}from"./CQK2bduw.js";const $={class:"space-y-6"},T={class:"bg-white rounded-lg shadow-sm p-6"},F={class:"flex items-center justify-between mb-4"},O={class:"flex items-center space-x-2"},J={class:"text-sm text-gray-600"},P={key:0,class:"mt-4 p-4 bg-yellow-100 border border-yellow-300 rounded-lg"},Q={key:0,class:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded text-xs"},G={class:"space-y-1 text-yellow-700"},U={key:0,class:"space-y-6"},K={class:"bg-white rounded-lg shadow-sm p-6"},W={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4"},X=["disabled"],Y={key:0,class:"animate-spin w-8 h-8 text-blue-500 mb-2",fill:"none",viewBox:"0 0 24 24"},Z={key:1,class:"w-8 h-8 text-blue-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ee={class:"text-sm font-medium text-gray-900"},se=["disabled"],te={key:0,class:"animate-spin w-8 h-8 text-yellow-500 mb-2",fill:"none",viewBox:"0 0 24 24"},le={key:1,class:"w-8 h-8 text-yellow-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},oe={class:"text-sm font-medium text-gray-900"},re={class:"text-sm font-medium text-gray-900"},ae={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ie={class:"bg-white rounded-lg shadow-sm p-6"},ne={class:"space-y-3"},de={class:"flex justify-between items-center p-3 bg-gray-50 rounded-lg"},ue={key:0,class:"grid grid-cols-2 gap-3"},ce={class:"p-3 bg-gray-50 rounded-lg"},ge={class:"text-lg font-semibold text-gray-900"},me={class:"p-3 bg-gray-50 rounded-lg"},xe={class:"text-lg font-semibold text-gray-900"},ve={class:"p-3 bg-gray-50 rounded-lg"},ye={class:"text-lg font-semibold text-gray-900"},pe={class:"p-3 bg-gray-50 rounded-lg"},be={class:"text-lg font-semibold text-gray-900"},he={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},fe={key:1,class:"bg-white rounded-lg shadow-sm p-6"},we={class:"space-y-3"},_e={class:"flex justify-between"},ke={class:"text-sm font-medium text-gray-900"},ze={class:"flex justify-between"},Ce={class:"text-sm font-medium text-gray-900"},Me={class:"flex justify-between"},Ae={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Be={key:0,class:"bg-white rounded-lg shadow-sm p-6"},Ve={class:"space-y-2"},je={key:0,class:"space-y-2"},He={class:"text-sm text-red-800"},qe={key:1,class:"space-y-2"},De={class:"text-sm text-yellow-800"},Ee={key:2,class:"space-y-2"},Re={class:"text-sm text-gray-800"},Se={key:1,class:"bg-white rounded-lg shadow-sm p-6"},Ne={class:"space-y-2"},Ie={class:"text-sm text-blue-800"},Le={class:"flex items-center justify-between space-x-2"},$e={class:"flex items-center space-x-2"},Te={class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},Fe={key:0,"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},Oe={key:1,"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},Je={key:2,"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},Pe={class:"bg-white rounded-lg shadow-xl max-w-4xl max-h-[90vh] overflow-hidden"},Qe={class:"flex items-center justify-between p-6 border-b border-gray-200"},Ge={class:"p-6 max-h-[70vh] overflow-y-auto"},Ue={class:"mb-6"},Ke={class:"p-3 bg-red-50 border border-red-200 rounded-lg"},We={class:"text-sm text-red-800"},Xe={key:0,class:"space-y-4"},Ye={key:0},Ze={class:"text-sm text-gray-700 font-mono bg-gray-50 p-2 rounded"},es={key:1},ss={class:"text-sm text-gray-700 font-mono bg-gray-50 p-2 rounded"},ts={key:2},ls={class:"text-sm text-gray-700 bg-gray-50 p-2 rounded"},os={key:3},rs={class:"bg-blue-50 border border-blue-200 rounded-lg p-3"},as={class:"space-y-1"},is={key:4,class:"border-t pt-4"},ns={class:"bg-gray-50 rounded-lg"},ds={class:"p-3 border-t border-gray-200"},us={class:"text-xs text-gray-700 whitespace-pre-wrap font-mono overflow-x-auto"},cs={class:"flex justify-end p-6 border-t border-gray-200 space-x-3"},ys={__name:"debug",setup(gs){const{get:C}=I(),{user:c,isAdmin:M,isManager:A,hasRole:B}=L(),d=v(null),y=v(!1),f=v(!1),V=v(!1),x=v({healthCheck:!1}),g=v({show:!1,type:"info",message:""}),n=v({show:!1,error:null,details:null}),w=E(()=>M()||A()||B("executive")),j=()=>!c.value||!c.value.roles?"無角色":Array.isArray(c.value.roles)?c.value.roles.join(", "):"角色格式錯誤",_=(r,s,u=5e3)=>{g.value={show:!0,type:r,message:s},setTimeout(()=>{g.value.show=!1},u)},H=(r,s=null)=>{n.value={show:!0,error:r,details:s}},q=()=>{if(!d.value)return"未檢查";switch(d.value.overall_status){case"healthy":return"系統正常";case"warning":return"系統警告";case"critical":return"系統異常";default:return"狀態未知"}},z=async()=>{x.value.healthCheck=!0;try{const{data:r,error:s}=await C("/debug/system/health");if(s)throw console.error("API Error:",s),new Error(s.message||"健康檢查失敗");if(r.success)d.value=r.health,_("success","系統健康檢查完成");else throw new Error(r.error||"健康檢查失敗")}catch(r){console.error("健康檢查失敗:",r);let s="未知錯誤",u=null;r.response?(s=r.response.data?.error||r.response.statusText||"服務器錯誤",u=r.response.data?.error_details||null,console.error("API Error Response:",r.response.data)):r.request?(s="無法連接到服務器，請檢查網路連接",console.error("Request Error:",r.request)):(s=r.message||"請求處理失敗",console.error("General Error:",r.message)),_("error","健康檢查失敗："+s),u&&H(s,u)}finally{x.value.healthCheck=!1}},D=()=>{y.value=!y.value,localStorage.setItem("debug_panel_enabled",y.value.toString());const r=y.value?"除錯模式已啟用":"除錯模式已關閉";_("success",r)};return R(()=>{y.value=localStorage.getItem("debug_panel_enabled")==="true",(w.value||f.value)&&z()}),S({title:"系統除錯 - 設定"}),(r,s)=>(o(),l("div",$,[e("div",T,[e("div",F,[s[10]||(s[10]=e("h2",{class:"text-2xl font-bold text-gray-900"}," 系統除錯面板 ",-1)),e("div",O,[e("div",{class:h(["w-3 h-3 rounded-full",t(d)?.overall_status==="healthy"?"bg-green-500 animate-pulse":t(d)?.overall_status==="warning"?"bg-yellow-500 animate-pulse":"bg-red-500 animate-pulse"])},null,2),e("span",J,a(q()),1)])]),s[13]||(s[13]=e("p",{class:"text-gray-600"}," 診斷系統狀態、管理Firebase同步、監控資料庫連接 ",-1)),t(w)?i("",!0):(o(),l("div",P,[s[12]||(s[12]=e("div",{class:"flex items-center mb-2"},[e("svg",{class:"w-5 h-5 text-yellow-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),e("span",{class:"text-yellow-800 font-medium"},"您需要管理員權限才能使用除錯功能")],-1)),t(V)?(o(),l("div",Q,[s[11]||(s[11]=e("div",{class:"font-medium text-yellow-900 mb-2"},"調試信息：",-1)),e("div",G,[e("div",null,"用戶: "+a(t(c)?.name||t(c)?.email||"未載入"),1),e("div",null,"用戶ID: "+a(t(c)?.id||"無"),1),e("div",null,"角色: "+a(j()),1),e("div",null,"角色原始數據: "+a(JSON.stringify(t(c)?.roles)),1),e("div",null,"isAdmin方法: "+a(t(c)?.isAdmin?"有":"無"),1),e("div",null,"isManager方法: "+a(t(c)?.isManager?"有":"無"),1),e("div",null,"canAccessAllChats方法: "+a(t(c)?.canAccessAllChats?"有":"無"),1)]),e("button",{onClick:s[0]||(s[0]=u=>f.value=!0),class:"mt-2 px-3 py-1 bg-yellow-200 text-yellow-800 rounded text-xs hover:bg-yellow-300"}," 臨時啟用（開發用） ")])):i("",!0)]))]),t(w)||t(f)?(o(),l("div",U,[e("div",K,[s[25]||(s[25]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"快速動作",-1)),e("div",W,[e("button",{onClick:z,disabled:t(x).healthCheck,class:"flex flex-col items-center p-4 bg-gray-100 text-gray-900 border-2 border-gray-300 rounded-lg hover:bg-gray-200 hover:border-blue-500 transition-colors disabled:opacity-50"},[t(x).healthCheck?(o(),l("svg",Y,[...s[14]||(s[14]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(o(),l("svg",Z,[...s[15]||(s[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])),e("span",ee,a(t(x).healthCheck?"檢查中...":"系統健康檢查"),1)],8,X),i("",!0),e("button",{onClick:s[2]||(s[2]=(...u)=>r.validateData&&r.validateData(...u)),disabled:t(x).validation,class:"flex flex-col items-center p-4 bg-gray-100 text-gray-900 border-2 border-gray-300 rounded-lg hover:bg-gray-200 hover:border-yellow-500 transition-colors disabled:opacity-50"},[t(x).validation?(o(),l("svg",te,[...s[18]||(s[18]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(o(),l("svg",le,[...s[19]||(s[19]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"},null,-1)])])),e("span",oe,a(t(x).validation?"驗證中...":"資料完整性驗證"),1)],8,se),e("button",{onClick:D,class:"flex flex-col items-center p-4 bg-gray-100 text-gray-900 border-2 border-gray-300 rounded-lg hover:bg-gray-200 hover:border-purple-500 transition-colors"},[s[20]||(s[20]=e("svg",{class:"w-8 h-8 text-purple-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),e("span",re,a(t(y)?"除錯模式：已啟用":"啟用除錯模式"),1)]),i("",!0),i("",!0)])]),e("div",ae,[i("",!0),e("div",ie,[s[38]||(s[38]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},[e("svg",{class:"w-5 h-5 mr-2 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})]),k(" MySQL 資料庫 ")],-1)),e("div",ne,[e("div",de,[s[33]||(s[33]=e("span",{class:"text-sm text-gray-600"},"連接狀態",-1)),e("span",{class:h(["text-sm font-medium px-2 py-1 rounded",t(d)?.mysql?.connection?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},a(t(d)?.mysql?.connection?"已連接":"未連接"),3)]),t(d)?.mysql?(o(),l("div",ue,[e("div",ce,[s[34]||(s[34]=e("div",{class:"text-xs text-gray-500"},"總對話數",-1)),e("div",ge,a(t(d).mysql.conversations_count||0),1)]),e("div",me,[s[35]||(s[35]=e("div",{class:"text-xs text-gray-500"},"總客戶數",-1)),e("div",xe,a(t(d).mysql.customers_count||0),1)]),e("div",ve,[s[36]||(s[36]=e("div",{class:"text-xs text-gray-500"},"LINE客戶",-1)),e("div",ye,a(t(d).mysql.line_customers||0),1)]),e("div",pe,[s[37]||(s[37]=e("div",{class:"text-xs text-gray-500"},"已分配客戶",-1)),e("div",be,a(t(d).mysql.assigned_customers||0),1)])])):i("",!0)])])]),e("div",he,[i("",!0),r.lastValidationResult?(o(),l("div",fe,[s[48]||(s[48]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"資料完整性驗證",-1)),e("div",we,[e("div",_e,[s[45]||(s[45]=e("span",{class:"text-sm text-gray-600"},"MySQL 記錄",-1)),e("span",ke,a(r.lastValidationResult.mysql_count||0),1)]),e("div",ze,[s[46]||(s[46]=e("span",{class:"text-sm text-gray-600"},"Firebase 記錄",-1)),e("span",Ce,a(r.lastValidationResult.firebase_count||0),1)]),e("div",Me,[s[47]||(s[47]=e("span",{class:"text-sm text-gray-600"},"資料一致性",-1)),e("span",{class:h(["text-sm font-medium px-2 py-1 rounded",r.lastValidationResult.is_consistent?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},a(r.lastValidationResult.is_consistent?"一致":"不一致"),3)])])])):i("",!0),i("",!0)]),e("div",Ae,[t(d)?.system_anomalies?.length||t(d)?.critical_issues?.length||t(d)?.warning_issues?.length?(o(),l("div",Be,[s[58]||(s[58]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4 flex items-center"},[e("svg",{class:"w-5 h-5 mr-2 text-red-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),k(" 系統異常狀況 ")],-1)),e("div",Ve,[t(d).critical_issues?.length?(o(),l("div",je,[s[53]||(s[53]=e("div",{class:"text-sm font-medium text-red-700"},"嚴重問題：",-1)),(o(!0),l(p,null,b(t(d).critical_issues,(u,m)=>(o(),l("div",{key:"critical-"+m,class:"flex items-start space-x-3 p-2 bg-red-50 rounded-lg"},[s[52]||(s[52]=e("svg",{class:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),e("span",He,a(u),1)]))),128))])):i("",!0),t(d).warning_issues?.length?(o(),l("div",qe,[s[55]||(s[55]=e("div",{class:"text-sm font-medium text-yellow-700"},"警告問題：",-1)),(o(!0),l(p,null,b(t(d).warning_issues,(u,m)=>(o(),l("div",{key:"warning-"+m,class:"flex items-start space-x-3 p-2 bg-yellow-50 rounded-lg"},[s[54]||(s[54]=e("svg",{class:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),e("span",De,a(u),1)]))),128))])):i("",!0),t(d).system_anomalies?.length?(o(),l("div",Ee,[s[57]||(s[57]=e("div",{class:"text-sm font-medium text-gray-700"},"其他異常：",-1)),(o(!0),l(p,null,b(t(d).system_anomalies,(u,m)=>(o(),l("div",{key:"anomaly-"+m,class:"flex items-start space-x-3 p-2 bg-gray-50 rounded-lg"},[s[56]||(s[56]=e("svg",{class:"w-4 h-4 text-gray-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1)),e("span",Re,a(u),1)]))),128))])):i("",!0)])])):i("",!0),t(d)?.recommendations?.length?(o(),l("div",Se,[s[60]||(s[60]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"系統建議",-1)),e("div",Ne,[(o(!0),l(p,null,b(t(d).recommendations,(u,m)=>(o(),l("div",{key:m,class:"flex items-start space-x-3 p-3 bg-blue-50 rounded-lg"},[s[59]||(s[59]=e("svg",{class:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1)),e("span",Ie,a(u),1)]))),128))])])):i("",!0)])])):i("",!0),t(g).show?(o(),l("div",{key:1,class:h(["fixed top-4 right-4 p-4 rounded-lg shadow-lg transition-all duration-300 z-40",t(g).type==="success"?"bg-green-100 text-green-800 border border-green-200":t(g).type==="error"?"bg-red-100 text-red-800 border border-red-200":t(g).type==="warning"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"])},[e("div",Le,[e("div",$e,[(o(),l("svg",Te,[t(g).type==="success"?(o(),l("path",Fe)):t(g).type==="error"?(o(),l("path",Oe)):(o(),l("path",Je))])),e("span",null,a(t(g).message),1)]),t(g).type==="error"&&t(n).error?(o(),l("button",{key:0,onClick:s[5]||(s[5]=u=>t(n).show=!0),class:"text-xs underline hover:no-underline ml-2"}," 查看詳情 ")):i("",!0)])],2)):i("",!0),t(n).show?(o(),l("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:s[9]||(s[9]=N(u=>t(n).show=!1,["self"]))},[e("div",Pe,[e("div",Qe,[s[62]||(s[62]=e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-6 h-6 text-red-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),e("h3",{class:"text-lg font-semibold text-gray-900"},"錯誤詳細信息")],-1)),e("button",{onClick:s[6]||(s[6]=u=>t(n).show=!1),class:"text-gray-400 hover:text-gray-600"},[...s[61]||(s[61]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Ge,[e("div",Ue,[s[63]||(s[63]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"錯誤訊息",-1)),e("div",Ke,[e("p",We,a(t(n).error),1)])]),t(n).details?(o(),l("div",Xe,[t(n).details.exception_type?(o(),l("div",Ye,[s[64]||(s[64]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"異常類型",-1)),e("p",Ze,a(t(n).details.exception_type),1)])):i("",!0),t(n).details.file&&t(n).details.line?(o(),l("div",es,[s[65]||(s[65]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"發生位置",-1)),e("p",ss,a(t(n).details.file)+":"+a(t(n).details.line),1)])):i("",!0),t(n).details.context?(o(),l("div",ts,[s[66]||(s[66]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"操作內容",-1)),e("p",ls,a(t(n).details.context),1)])):i("",!0),t(n).details.suggestions&&t(n).details.suggestions.length?(o(),l("div",os,[s[68]||(s[68]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"解決建議",-1)),e("div",rs,[e("ul",as,[(o(!0),l(p,null,b(t(n).details.suggestions,(u,m)=>(o(),l("li",{key:m,class:"text-sm text-blue-800 flex items-start"},[s[67]||(s[67]=e("span",{class:"w-4 h-4 text-blue-500 mr-2 flex-shrink-0 mt-0.5"},"•",-1)),k(" "+a(u),1)]))),128))])])])):i("",!0),t(n).details.trace&&r.process.dev?(o(),l("div",is,[s[70]||(s[70]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"錯誤堆疊 (開發模式)",-1)),e("details",ns,[s[69]||(s[69]=e("summary",{class:"p-2 cursor-pointer text-sm text-gray-600 hover:text-gray-800"}," 點擊查看完整堆疊追蹤 ",-1)),e("div",ds,[e("pre",us,a(t(n).details.trace),1)])])])):i("",!0)])):i("",!0)]),e("div",cs,[e("button",{onClick:s[7]||(s[7]=u=>r.navigator.clipboard&&r.navigator.clipboard.writeText(JSON.stringify({error:t(n).error,details:t(n).details},null,2))),class:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-md hover:border-gray-400"}," 複製錯誤信息 "),e("button",{onClick:s[8]||(s[8]=u=>t(n).show=!1),class:"px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700"}," 關閉 ")])])])):i("",!0)]))}};export{ys as default};
