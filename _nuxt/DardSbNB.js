import{a_ as n,l,a$ as u,n as a}from"#entry";import{u as c}from"./DgLT0ASK.js";const m=n(async t=>{let r,i;const o=c(),s=l();if(console.log("Guest middleware - 檢查認證狀態:",o.isLoggedIn),console.log("Guest middleware - 目標路徑:",t.path),console.log("Guest middleware - redirect 參數:",t.query.redirect),console.log("Guest middleware - 跳過認證模式:",s.public.skipAuth),s.public.skipAuth){console.log("跳過認證模式已啟用，允許訪問所有頁面");return}try{[r,i]=u(()=>o.waitForInitialization()),await r,i(),console.log("Guest middleware - 初始化完成，登入狀態:",o.isLoggedIn)}catch(e){console.warn("Guest middleware 初始化失敗:",e)}if(o.isLoggedIn){const e=t.query.redirect||"/";return console.log("用戶已登入，從登入頁重定向到:",e),e==="/auth/login"?a("/"):a(e)}});export{m as default};
