# Line Bot 業務功能使用指南

## 🎯 核心功能：點擊客戶名稱自動跳轉對話

在 Line OA 查看客戶資料時，**點擊客戶賴名稱就可以自動跳轉到該客戶的個人對話框**，無需手動搜尋或複製貼上客戶 ID。

## 📋 業務人員 Line Bot 功能

### 身份自動識別
業務人員加入 Line OA 後，系統會根據 Line ID 自動識別身份和權限：

| Line ID | 姓名 | 部門 | 權限 |
|---------|------|------|------|
| U001 | 王小明 | 汽車部 | 業務 |
| U002 | 李美華 | 機車部 | 業務 |
| U003 | 張志強 | 手機部 | 業務 |
| U004 | 陳雅婷 | 汽車部 | 業務 |
| U005 | 林大雄 | 機車部 | 業務 |
| U006 | 黃主管 | 汽車部 | 主管 |
| U007 | 劉主管 | 機車部 | 主管 |
| U008 | 吳主管 | 手機部 | 主管 |
| U009 | 總經理 | 管理部 | 管理者 |

### 主要指令

#### 🔍 客戶管理
- **`客戶列表`** - 查看負責的客戶清單
- **`查看客戶`** - 同上
- **`客戶:姓名`** - 搜尋特定客戶（如：`客戶:張小花`）
- **`查詢:關鍵字`** - 搜尋客戶（支援姓名、Line名稱、案件編號）

#### 📊 案件管理
- **`案件管理`** - 查看個人案件統計
- **`我的案件`** - 同上

#### 📈 統計報表
- **`統計報表`** - 查看業績統計
- **`業績`** - 同上

#### 💻 網頁版
- **`網頁版`** - 直接跳轉到完整管理系統

## 🚀 客戶跳轉功能詳解

### 使用方式
1. 在 Line OA 中輸入 `客戶列表`
2. 系統會顯示客戶卡片列表
3. **點擊客戶的 Line 名稱**（綠色文字）
4. 自動跳轉到該客戶的個人對話視窗
5. 可直接開始對話

### 技術實現
- 使用 Line 官方深度連結：`https://line.me/R/ti/p/~{客戶Line名稱}`
- 支援行動裝置和桌面版 Line 應用程式
- 無需記憶或複製客戶 ID

### 客戶卡片資訊
每個客戶卡片包含：
- **Line 名稱**（可點擊跳轉）
- 真實姓名
- 案件編號
- 所在地區
- 來源網站
- 案件狀態
- **「💬 開始對話」按鈕**

## 🔐 權限控制

### 業務人員（Sales）
- 只能查看**自己負責**的客戶
- 看到分配給自己的案件統計
- 可搜尋自己的客戶資料

### 部門主管（Manager）
- 可查看**部門內所有**客戶
- 看到部門整體案件統計
- 可搜尋部門內所有客戶

### 公司管理者（Admin）
- 可查看**全部**客戶資料
- 看到公司整體統計
- 可搜尋所有客戶

## 📱 Flex Message 客戶列表

### 設計特色
- **響應式卡片**：支援行動裝置最佳顯示
- **顏色編碼**：
  - 綠色：Line 名稱（可點擊）
  - 灰色：基本資訊
  - 紅色：待處理案件
  - 藍綠色：可送件案件
- **一鍵操作**：點擊即可跳轉對話

### 批次顯示
- 每次最多顯示 **10 位客戶**
- 如超過 10 位會提示總數
- 建議使用搜尋功能快速定位

## 🔍 搜尋功能

### 支援搜尋項目
- 客戶真實姓名
- 客戶 Line 名稱
- 案件編號

### 搜尋語法
```
客戶:張小花        # 搜尋姓名包含「張小花」的客戶
客戶:LINE_USER_002  # 搜尋 Line 名稱包含此關鍵字的客戶
客戶:CASE17351     # 搜尋案件編號包含此關鍵字的客戶
```

## 📊 統計資訊

### 個人統計（業務）
- 待處理案件數
- 可送件案件數
- 總負責案件數
- 今日新案件數
- 已洽談案件數
- 個人成交率

### 部門統計（主管）
- 部門整體案件數
- 部門成交率
- 團隊成員績效

### 公司統計（管理者）
- 全公司案件數
- 各部門表現
- 整體營運指標

## 🛠️ 測試功能

### 執行測試
```bash
# 確保服務已啟動
npm start

# 執行測試腳本
node test-linebot.js
```

### 測試項目
1. ✅ 業務人員客戶列表查看
2. ✅ 案件管理功能
3. ✅ 主管統計報表
4. ✅ 客戶搜尋功能
5. ✅ 管理者權限測試
6. ✅ 一般客戶功能

## 💡 使用建議

### 工作流程
1. **晨會後**：輸入 `統計報表` 查看昨日成果
2. **開始工作**：輸入 `客戶列表` 查看今日待聯絡客戶
3. **聯絡客戶**：點擊客戶 Line 名稱直接開始對話
4. **更新案件**：使用網頁版進行詳細資料更新
5. **下班前**：再次查看統計確認進度

### 效率提升
- 使用**搜尋功能**快速定位特定客戶
- 善用**一鍵跳轉**避免手動查找客戶
- 定期查看**統計報表**掌握個人績效
- 結合**網頁版**進行完整資料管理

---

## 🎉 功能優勢

### ⚡ 效率提升
- **零步驟客戶跳轉**：從查看到對話只需一鍵
- **智能權限控制**：自動過濾顯示相關客戶
- **即時統計更新**：隨時掌握最新數據

### 📱 行動友善
- **原生 Line 體驗**：無需切換應用程式
- **響應式設計**：手機、平板、電腦都可用
- **離線快取**：基本功能支援離線查看

### 🔒 安全可靠
- **角色權限控制**：確保資料安全存取
- **加密通訊**：所有資料傳輸均已加密
- **稽核記錄**：完整操作日誌追蹤

---

**🚀 立即體驗 Line Bot 業務功能，提升工作效率！** 