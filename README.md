# 中租經銷商 Line Bot + CRM 系統

## 系統功能

### 🤖 Line Bot 智能客服
- 客戶自動註冊與身份識別
- AI 智能對話服務 (OpenAI GPT)
- 貸款服務諮詢 (汽車/機車/手機)
- 業務人員自動分配

### 👥 業務管理功能
- **三層權限管理**：管理者/主管/業務
- **客戶查看**：點擊客戶 Line 名稱直接跳轉對話
- **案件管理**：個人案件統計與追蹤
- **業績報表**：即時統計與績效追蹤

### 💻 Web CRM 系統
- 案件列表管理
- 客戶資料編輯
- 權限分配管理
- 統計報表儀表板

## Line Bot 使用方式

### 🔧 業務人員功能

#### 1. 身份識別
業務人員使用指定的 Line ID 即可自動識別身份：
- `U001` - 王小明 (業務)
- `U002` - 李美華 (業務)
- `U006` - 黃主管 (主管)
- `U009` - 總經理 (管理者)

#### 2. 主要功能指令
- `客戶列表` - 查看負責客戶
- `案件管理` - 個人案件統計
- `統計報表` - 業績數據
- `客戶:姓名` - 搜尋特定客戶

#### 3. 🎯 **一鍵跳轉客戶對話**
在客戶列表中：
1. 點擊客戶的 **Line 名稱** (綠色文字)
2. 自動跳轉到該客戶的個人對話視窗
3. 可直接開始對話聯絡

### 權限說明
- **業務人員**：只能查看自己負責的客戶
- **部門主管**：可查看部門內所有客戶
- **公司管理者**：可查看全部客戶資料

## 技術架構

- **後端**：Node.js + Express
- **Line SDK**：@line/bot-sdk
- **AI 服務**：OpenAI GPT-3.5
- **資料庫**：MySQL (Zeabur)
- **部署**：Zeabur 一鍵部署

## 環境變數

```
LINE_CHANNEL_ACCESS_TOKEN=你的_LINE_頻道_ACCESS_TOKEN
LINE_CHANNEL_SECRET=你的_LINE_頻道_SECRET
OPENAI_API_KEY=你的_OPENAI_API_KEY
```

## 本地開發

```bash
# 安裝依賴
npm install

# 啟動服務
npm start

# 訪問網頁版
http://localhost:3000
```

## 部署到 Zeabur

1. Fork 此專案到你的 GitHub
2. 在 Zeabur 連接 GitHub 倉庫
3. 設定環境變數
4. 一鍵部署

## 核心特色

### 🚀 客戶跳轉功能
- 業務在 Line OA 查看客戶資料時
- 點擊客戶 Line 名稱即可**自動跳轉**到個人對話
- 無需手動搜尋客戶 ID 或複製貼上
- 提升業務工作效率

### 🔐 安全性
- JWT 身份驗證
- 三層權限控制
- Rate Limiting 防止濫用
- Helmet 安全標頭

### 📊 智能統計
- 即時案件狀態追蹤
- 來源網站效果分析
- 地區客戶分布統計
- 業務績效排行

---

**中租經銷商專用系統** | 專業 Line Bot + CRM 解決方案 